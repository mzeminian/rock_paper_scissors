<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Rock Paper Scissors</title>
</head>
<body>
    <div class="blockGame" id="blockGame">
        <div class="stopContainer">        
            <p id="stopText"></p>
            <button onClick="refreshPage()">Play Again</button>
        </div>
    </div>

    <div class="header">
        <h1>Rock Paper Scissors</h1>
        <h3>Time to beat the AI</h3>
    </div>
    

    <div class="main_container">
        <button type="button" class="btn" id="Rock">Rock</button>
        <button type="button" class="btn" id="Paper">Paper</button>
        <button type="button" class="btn" id="Scissors">Scissors</button>
    </div>

    <div class="points">
        <p>PLAYER POINTS: <span id="ppoints">0</span></p>
        <p>COMPUTER POINTS: <span id="cpoints">0</span></p>
        <p id="result">----------</p>
    </div>

    <script>
        function getComputerChoice() {
            let value = Math.floor(Math.random() * 3) + 1
            if(value == 1){
                return "Rock"
            } else if (value == 2) {
                return "Paper"
            } else {
                return "Scissors"
            }
        }

        var computerSelection = "";
        var playerSelection = "";

        const stopDiv = document.getElementById("blockGame")
        const result = document.getElementById("result");
        const stopText = document.getElementById("stopText");
        const ppoints = document.getElementById("ppoints");
        const cpoints = document.getElementById("cpoints");

        var playerPoints = 0;
        var computerPoints = 0;

        var buttons = document.querySelectorAll('.btn');

        buttons.forEach((button) => {
            button.addEventListener('click', () => {
            playerSelection = button.id;
            playRound(playerSelection, computerSelection);
            ppoints.innerHTML = playerPoints;
            cpoints.innerHTML = computerPoints;
            checkPoint();
            });
        });

        function checkPoint(){
            if(playerPoints == 5){
                stopText.innerHTML = "YOU WIN";
                stopDiv.classList.add("blockGame")
                stopDiv.style.visibility = "visible";
            } else if (computerPoints == 5){
                stopText.innerHTML = "YOU LOSE";
                stopDiv.classList.add("blockGame")
                stopDiv.style.visibility = "visible";
            }
        }

        function playRound(playerSelection, computerSelection) {
            
            playerSelection = playerSelection;
            computerSelection = getComputerChoice();     

            console.log(playerSelection, computerSelection)

            if (playerSelection == computerSelection){
                result.innerHTML = "Pari";
                return playerPoints
                return computerPoints
            }

            if (playerSelection == "Rock" && computerSelection == "Paper") {
                computerPoints = computerPoints+1
                result.innerHTML = "You Lose! Paper beats Rock"
                return computerPoints
            } else if (playerSelection == "Paper" && computerSelection == "Rock") {
                playerPoints = playerPoints+1;
                result.innerHTML = "You Win! Paper beats Rock"
                return playerPoints
            }

            if (playerSelection == "Scissors" && computerSelection == "Rock") {
                computerPoints = computerPoints+1
                result.innerHTML = "You Lose! Rock beats Scissors"
                return computerPoints
            } else if (playerSelection == "Rock" && computerSelection == "Scissors") {
                playerPoints = playerPoints+1;
                result.innerHTML = "You Win! Rock beats Scissors"
                return playerPoints
            }

            if (playerSelection == "Scissors" && computerSelection == "Paper") {
                playerPoints = playerPoints+1;
                result.innerHTML = "You Win! Scissors beats Paper"
                return playerPoints
            } else if (playerSelection == "Paper" && computerSelection == "Scissors") {
                computerPoints = computerPoints+1
                result.innerHTML = "You Lose! Scissors beats Paper"
                return computerPoints
            }
        }
        
        function refreshPage(){
            window.location.reload();
        }   

    </script>
</body>
</html>